Тестовое задание
Контекст
Представь, что ты разрабатываешь микросервис для финтех-стартапа.
Команда работает над платформой, которая помогает малому бизнесу
принимать платежи. Один из ключевых запросов от пользователей — понять,
что вообще происходит с платежом после нажатия кнопки "Оплатить".
Платёж живёт своей жизнью: его инициируют, он ждёт действий клиента,
иногда зависает на стороне банка, затем успешно проходит (или нет).
Каждый шаг — это событие, и вместе они рассказывают историю конкретной
транзакции.
Твоя задача — спроектировать и написать небольшой сервис, который умеет
отслеживать жизненный цикл платежа через события и предоставлять эту
историю через АРІ.
Что нужно сделать
1. Модель платежа
Спроектируй доменную модель платежа. Подумай, как платёж узнаёт о себе:
какие у него состояния, как он переходит из одного в другое, что он может
рассказать о своей природе. Платёж — это не просто набор полей. Он знает
правила, по которым живёт.
Есть модели данных, которые просто хранят информацию. А есть сущности,
которые несут в себе логику и понимают свою природу.
2. Хранилище событий
Реализуй механизм сохранения событий о платеже. Внешние сервисы (БД,
Kafka, Redis) не используй — только in-memory или файл (JSON). Главное -
покажи, как ты организуешь хранение так, чтобы историю можно было
читать и дополнять.
События могут быть примерно такими (но ты можешь придумать свои):
Платёж инициирован
Ссылка для оплаты готова
• Клиент перешёл по ссылке
• Платёж успешно завершён
• Произошла ошибка
События — это факты. Они случились в прошлом. Подумай, что это значит
для их структуры и модели.
3. Бизнес-логика
Напиши 2-3 сценария (use case), которые генерируют события. Например:
Создание платежа
Обработка webhook от платёжного провайдера
• Повторная попытка оплаты
Главное — покажи, как бизнес-логика работает с доменом и событиями.
4. API
Сделай один HTTP endpoint, который возвращает историю событий
конкретного платежа. Формат ответа на твоё усмотрение — что имеет смысл
для фронтенда или другого сервиса?
5. Тесты
Напиши 1-2 юнит-теста на логику. Покажи, как ты подходишь к тестированию
бизнес-сценариев.
Технические ограничения
Стек:
Чистый Node.js / Bun
• Fastify / Elysia (на выбор)
• Zod / TypeBox / Valibot (на выбор)
• Любые дополнительные библиотеки — но обоснуй, зачем они нужны
Принципы:
Минимализм, но без фанатизма
Обоснованная абстракция — если что-то абстрагируешь, должна быть
причина
• Хороший DX (Developer Experience) — код должен быть понятен коллеге
через полгода
Масштабируемость — как бы ты развивал это решение дальше?
Архитектура:
• Правильное разбиение на слои (что-то близкое к чистой архитектуре)
• SOLID, DRY, KISS — но не ради галочки, а где это действительно помогает
Особое ограничение:
В кодовой базе можно использовать только один раз throw и один раз
try-catch. При этом важно обрабатывать все ошибки
ии:
Можешь использовать для рутины и консультаций. Но итоговый код
оценивается без скидки на огрехи ИИ — всё должно быть вычищено,
человекопонятно и аккуратно.
Что не нужно
Документация и README (защита в живом диалоге)
Настоящая БД или внешние сервисы
Интеграция с реальными платёжными системами
UI или фронтенд
Что хотелось бы увидеть
• Платёж как сущность — не просто структура данных, а объект со своей
логикой
• Явная обработка ошибок — без сюрпризов и неожиданных исключений
Простоту — решение, которое легко понять и изменить
Намёки на масштабирование — как бы ты развивал систему дальше
(можешь оставить комментарии)
Тесты — не формальные, а те, которые реально проверяют логику
Твой почерк — как ты думаешь, какие решения принимаешь, почему
именно так
Время
4-6 часов. Не больше. Мы оцениваем подход, а не количество кода.
Защита
После выполнения мы обсудим решение в живом диалоге. Подготовься
объяснить:
•
.
Почему выбрал такую структуру?
Как бы подключил Kafka/NATS в эту архитектуру?
Как бы масштабировал это решение при росте нагрузки?
Какие компромиссы ты сделал и почему?
Ещё важное
Код и комментарии пиши на русском языке. Логи тоже.
Покажи, как ты решаешь задачи. Нам интересен твой стиль мышления, твои
решения, твоя архитектура — не шаблоны из интернета.
Удачи!